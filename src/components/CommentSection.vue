<script setup>
import Giscus from '@giscus/vue'

// Giscus é…ç½®
// âš ï¸ é‡è¦ï¼šä½ éœ€è¦å» https://giscus.app/zh-CN è·å–ä½ è‡ªå·±çš„ä»“åº“é…ç½®
// ç„¶åæ›¿æ¢ä¸‹é¢çš„ repo, repoId, category, categoryId
const giscusConfig = {
  repo:"Dls-git/myblog",
  repoId:"R_kgDOQoFYMA",
  category:"Announcements",
  categoryId:"DIC_kwDOQoFYMM4Cz8z6",
  mapping: "pathname",
  strict: "0",
  reactionsEnabled: "1",
  emitMetadata: "0",
  inputPosition: "top",
  theme: "preferred_color_scheme",
  lang: "zh-CN",
  loading: "lazy"
}
</script>

<template>
  <div class="comment-section">
    <div class="divider">
      <span>END</span>
    </div>
    
    <h3>ğŸ’¬ è¯„è®ºåŒº</h3>
    
    <!-- æç¤ºä¿¡æ¯ (é…ç½®å¥½åå¯ä»¥åˆ é™¤è¿™ä¸ªæç¤ºæ¡†) -->
    <div class="comment-tip" v-if="giscusConfig.repo === 'your-github-username/your-repo-name'">
      <h4>ğŸš§ è¯„è®ºåŒºæœªé…ç½®</h4>
      <p>è¦å¯ç”¨è¯„è®ºåŠŸèƒ½ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
      <ol>
        <li>è®¿é—® <a href="https://giscus.app/zh-CN" target="_blank">giscus.app</a></li>
        <li>è¾“å…¥ä½ çš„ GitHub ä»“åº“ä¿¡æ¯ (éœ€å…¬å¼€ä»“åº“ä¸”å¼€å¯ Discussions)</li>
        <li>è·å–ç”Ÿæˆçš„é…ç½®ä»£ç </li>
        <li>ä¿®æ”¹é¡¹ç›®ä¸­çš„ <code>src/components/CommentSection.vue</code> æ–‡ä»¶ï¼Œå¡«å…¥ <code>repo</code>, <code>repoId</code>, <code>category</code>, <code>categoryId</code></li>
      </ol>
    </div>
    
    <div class="giscus-wrapper">
      <Giscus v-bind="giscusConfig" />
    </div>
  </div>
</template>

<style scoped>
.comment-section {
  margin-top: 80px;
  padding-top: 20px;
  max-width: 800px; /* é™åˆ¶è¯„è®ºåŒºå®½åº¦ */
  margin-left: auto;
  margin-right: auto;
}

.divider {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 40px;
  opacity: 0.3;
  
  &::before, &::after {
    content: '';
    flex: 1;
    height: 1px;
    background: currentColor;
  }
  
  span {
    padding: 0 15px;
    font-size: 14px;
    letter-spacing: 2px;
  }
}

h3 {
  margin-bottom: 20px;
  color: rgb(var(--color-text-primary));
}

.comment-tip {
  background: rgba(var(--color-bg-secondary), 0.5);
  border: 1px solid rgba(var(--color-border-primary), 0.3);
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 30px;
  color: rgb(var(--color-text-primary));
  
  h4 {
    margin-top: 0;
    color: #e6a23c;
  }
  
  ol {
    padding-left: 20px;
    margin-bottom: 0;
  }
  
  li {
    margin-bottom: 8px;
  }
  
  a {
    color: #409eff;
    text-decoration: underline;
  }
}

.giscus-wrapper {
  min-height: 200px;
}
</style>
